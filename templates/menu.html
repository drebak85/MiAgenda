<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Menú Semanal</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='estilos.css') }}">
  <script type="module" src="{{ url_for('static', filename='js/menu.js') }}"></script>
</head>
<body>
  <h1>Menú Semanal</h1>

  <div id="menu-semanal">
    <!-- Se generan 7 días con desayuno, comida y cena -->
    {% for item in fechas_con_dias %} {# Cambio aquí: de 'fechas' a 'fechas_con_dias' #}
  <section class="dia-menu" data-fecha="{{ item.fecha.strftime('%Y-%m-%d') }}">



    <h2>{{ item.dia_nombre }}</h2> {# Usamos el nombre del día real #}

        {% for tipo in ['Desayuno', 'Comida', 'Cena'] %}
        <div class="comida-dia">
          <h3>{{ tipo }}</h3>
          <select class="selector-receta">
            <option value="">Selecciona una receta</option>
            <!-- Opciones se rellenan desde JS -->
          </select>
          <button class="btn-add">Añadir</button>
          <ul class="lista-recetas"></ul>

          <div class="totales">
            <p>Precio total: <span class="precio">0.00 €</span></p>
            <p>Calorías: <span class="calorias">0</span> kcal</p>
            <p>Proteínas: <span class="proteinas">0</span> g</p>
          </div>
        </div>
        {% endfor %}
      </section>
    {% endfor %}
  </div>

  <hr>
  <section id="resumen-semanal">
    <h2>Resumen Semanal</h2>
    <p>Coste total: <span id="coste-semanal">0.00 €</span></p>
    <p>Calorías totales: <span id="calorias-semanales">0</span> kcal</p>
    <p>Proteínas totales: <span id="proteinas-semanales">0</span> g</p>
  </section>
</body>
</html>

<div style="text-align:center; margin: 20px;">
  <button id="guardar-menu" class="btn-success">Guardar menú semanal</button>
</div>


<script src="/static/js/menu.js" type="module"></script>
